meta {
  name: login
  type: http
  seq: 1
}

post {
  url: http://localhost:8080/auth/login
  body: json
  auth: inherit
}

body:json {
  {
    "email": "hhaltom@mattsharp.dev",
    "password": "test1234"
  }
}

script:post-response {
  if (res("csrf_token")) {
    bru.setVar("csrf_token", res("csrf_token"));
    console.log("Login: New CSRF token stored:", res("csrf_token"));
  } else {console.log("Login: No new CSRF token")}
}

settings {
  encodeUrl: true
  timeout: 0
}
